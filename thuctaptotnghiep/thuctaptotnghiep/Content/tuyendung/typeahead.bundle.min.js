var $jscomp={scope:{},findInternal:function(g,d,m){g instanceof String&&(g=String(g));for(var n=g.length,p=0;p<n;p++){var u=g[p];if(d.call(m,u,p,g))return{i:p,v:u}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(g,d,m){if(m.get||m.set)throw new TypeError("ES3 does not support getters and setters.");g!=Array.prototype&&g!=Object.prototype&&(g[d]=m.value)};
$jscomp.getGlobal=function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global&&null!=global?global:g};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(g,d,m,n){if(d){m=$jscomp.global;g=g.split(".");for(n=0;n<g.length-1;n++){var p=g[n];p in m||(m[p]={});m=m[p]}g=g[g.length-1];n=m[g];d=d(n);d!=n&&null!=d&&$jscomp.defineProperty(m,g,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(g){return g?g:function(d,g){return $jscomp.findInternal(this,d,g).v}},"es6-impl","es3");
(function(g){var d=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(b){return!b||/^\s*$/.test(b)},escapeRegExChars:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(b){return"string"===typeof b},isNumber:function(b){return"number"===typeof b},isArray:g.isArray,isFunction:g.isFunction,isObject:g.isPlainObject,isUndefined:function(b){return"undefined"===
typeof b},toStr:function(b){return d.isUndefined(b)||null===b?"":b+""},bind:g.proxy,each:function(b,d){g.each(b,function(b,c){return d(c,b)})},map:g.map,filter:g.grep,every:function(b,d){var f=!0;if(!b)return f;g.each(b,function(c,a){if(!(f=d.call(null,a,c,b)))return!1});return!!f},some:function(b,d){var f=!1;if(!b)return f;g.each(b,function(c,a){if(f=d.call(null,a,c,b))return!1});return!!f},mixin:g.extend,getUniqueId:function(){var b=0;return function(){return b++}}(),templatify:function(b){function d(){return String(b)}
return g.isFunction(b)?b:d},defer:function(b){setTimeout(b,0)},debounce:function(b,d,f){var c,a;return function(){var e=this,h=arguments,q;q=f&&!c;clearTimeout(c);c=setTimeout(function(){c=null;f||(a=b.apply(e,h))},d);q&&(a=b.apply(e,h));return a}},throttle:function(b,d){var f,c,a,e,h,q;h=0;q=function(){h=new Date;a=null;e=b.apply(f,c)};return function(){var l=new Date,g=d-(l-h);f=this;c=arguments;0>=g?(clearTimeout(a),a=null,h=l,e=b.apply(f,c)):a||(a=setTimeout(q,g));return e}},noop:function(){}}}(),
m=function(){function b(c){return(c=d.toStr(c))?c.split(/\s+/):[]}function g(c){return(c=d.toStr(c))?c.split(/\W+/):[]}function f(c){return function(){var a=[].slice.call(arguments,0);return function(e){var h=[];d.each(a,function(a){h=h.concat(c(d.toStr(e[a])))});return h}}}return{nonword:g,whitespace:b,obj:{nonword:f(g),whitespace:f(b)}}}(),n=function(){function b(c){this.maxSize=d.isNumber(c)?c:100;this.reset();0>=this.maxSize&&(this.set=this.get=g.noop)}function k(){this.head=this.tail=null}function f(c,
a){this.key=c;this.val=a;this.prev=this.next=null}d.mixin(b.prototype,{set:function(c,a){var e=this.list.tail;this.size>=this.maxSize&&(this.list.remove(e),delete this.hash[e.key]);(e=this.hash[c])?(e.val=a,this.list.moveToFront(e)):(e=new f(c,a),this.list.add(e),this.hash[c]=e,this.size++)},get:function(c){if(c=this.hash[c])return this.list.moveToFront(c),c.val},reset:function(){this.size=0;this.hash={};this.list=new k}});d.mixin(k.prototype,{add:function(c){this.head&&(c.next=this.head,this.head.prev=
c);this.head=c;this.tail=this.tail||c},remove:function(c){c.prev?c.prev.next=c.next:this.head=c.next;c.next?c.next.prev=c.prev:this.tail=c.prev},moveToFront:function(c){this.remove(c);this.add(c)}});return b}(),p=function(){function b(c){this.prefix=["__",c,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+d.escapeRegExChars(this.prefix))}function g(c){return JSON.stringify(d.isUndefined(c)?null:c)}var f;try{f=window.localStorage,f.setItem("~~~","!"),f.removeItem("~~~")}catch(c){f=
null}d.mixin(b.prototype,f&&window.JSON?{_prefix:function(c){return this.prefix+c},_ttlKey:function(c){return this._prefix(c)+this.ttlKey},get:function(c){this.isExpired(c)&&this.remove(c);return JSON.parse(f.getItem(this._prefix(c)))},set:function(c,a,e){d.isNumber(e)?f.setItem(this._ttlKey(c),g((new Date).getTime()+e)):f.removeItem(this._ttlKey(c));return f.setItem(this._prefix(c),g(a))},remove:function(c){f.removeItem(this._ttlKey(c));f.removeItem(this._prefix(c));return this},clear:function(){var c,
a,e=[],h=f.length;for(c=0;c<h;c++)(a=f.key(c)).match(this.keyMatcher)&&e.push(a.replace(this.keyMatcher,""));for(c=e.length;c--;)this.remove(e[c]);return this},isExpired:function(c){c=JSON.parse(f.getItem(this._ttlKey(c)));return d.isNumber(c)&&(new Date).getTime()>c?!0:!1}}:{get:d.noop,set:d.noop,remove:d.noop,clear:d.noop,isExpired:d.noop});return b}(),u=function(){function b(a){a=a||{};this.cancelled=!1;this.lastUrl=null;this._send=a.transport?k(a.transport):g.ajax;this._get=a.rateLimiter?a.rateLimiter(this._get):
this._get;this._cache=!1===a.cache?new n(0):e}function k(a){return function(e,c){var h=g.Deferred();a(e,c,function(a){d.defer(function(){h.resolve(a)})},function(a){d.defer(function(){h.reject(a)})});return h}}var f=0,c={},a=6,e=new n(10);b.setMaxPendingRequests=function(e){a=e};b.resetCache=function(){e.reset()};d.mixin(b.prototype,{_get:function(e,b,d){function h(a){d&&d(null,a);g._cache.set(e,a)}function q(){d&&d(!0)}function l(){f--;delete c[e];g.onDeckRequestArgs&&(g._get.apply(g,g.onDeckRequestArgs),
g.onDeckRequestArgs=null)}var g=this,k;this.cancelled||e!==this.lastUrl||((k=c[e])?k.done(h).fail(q):f<a?(f++,c[e]=this._send(e,b).done(h).fail(q).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(a,e,c){var h;d.isFunction(e)&&(c=e,e={});this.cancelled=!1;this.lastUrl=a;(h=this._cache.get(a))?d.defer(function(){c&&c(null,h)}):this._get(a,e,c);return!!h},cancel:function(){this.cancelled=!0}});return b}(),B=function(){function b(a){a=a||{};a.datumTokenizer&&a.queryTokenizer||
g.error("datumTokenizer and queryTokenizer are both required");this.datumTokenizer=a.datumTokenizer;this.queryTokenizer=a.queryTokenizer;this.reset()}function k(a){a=d.filter(a,function(a){return!!a});return a=d.map(a,function(a){return a.toLowerCase()})}function f(a){for(var e={},c=[],b=0,f=a.length;b<f;b++)e[a[b]]||(e[a[b]]=!0,c.push(a[b]));return c}function c(a,e){function c(a,e){return a-e}var b=0,f=0,d=[];a=a.sort(c);e=e.sort(c);for(var g=a.length,k=e.length;b<g&&f<k;)a[b]<e[f]?b++:(a[b]>e[f]||
(d.push(a[b]),b++),f++);return d}d.mixin(b.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(a){var e=this;a=d.isArray(a)?a:[a];d.each(a,function(a){var c;c=e.datums.push(a)-1;a=k(e.datumTokenizer(a));d.each(a,function(a){var h,b;h=e.trie;for(a=a.split("");b=a.shift();)h=h.children[b]||(h.children[b]={ids:[],children:{}}),h.ids.push(c)})})},get:function(a){var e=this,h;a=k(this.queryTokenizer(a));d.each(a,function(a){var b,f;if(h&&0===h.length)return!1;b=e.trie;
for(a=a.split("");b&&(f=a.shift());)b=b.children[f];if(b&&0===a.length)b=b.ids.slice(0),h=h?c(h,b):b;else return h=[],!1});return h?d.map(f(h),function(a){return e.datums[a]}):[]},reset:function(){this.datums=[];this.trie={ids:[],children:{}}},serialize:function(){return{datums:this.datums,trie:this.trie}}});return b}(),x=function(){return{local:function(b){return b.local||null},prefetch:function(b){var k;k={url:null,thumbprint:"",ttl:864E5,filter:null,ajax:{}};if(b=b.prefetch||null)b=d.isString(b)?
{url:b}:b,b=d.mixin(k,b),b.thumbprint="0.10.5"+b.thumbprint,b.ajax.type=b.ajax.type||"GET",b.ajax.dataType=b.ajax.dataType||"json",!b.url&&g.error("prefetch requires url to be set");return b},remote:function(b){function k(a){return function(e){return d.debounce(e,a)}}function f(a){return function(e){return d.throttle(e,a)}}var c;c={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(b=b.remote||null)b=d.isString(b)?{url:b}:b,
b=d.mixin(c,b),b.rateLimiter=/^throttle$/i.test(b.rateLimitBy)?f(b.rateLimitWait):k(b.rateLimitWait),b.ajax.type=b.ajax.type||"GET",b.ajax.dataType=b.ajax.dataType||"json",delete b.rateLimitBy,delete b.rateLimitWait,!b.url&&g.error("remote requires url to be set");return b}}}();(function(b){function k(a){a&&(a.local||a.prefetch||a.remote)||g.error("one of local, prefetch, or remote is required");this.limit=a.limit||5;this.sorter=f(a.sorter);this.dupDetector=a.dupDetector||c;this.local=x.local(a);
this.prefetch=x.prefetch(a);this.remote=x.remote(a);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new B({datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer});this.storage=this.cacheKey?new p(this.cacheKey):null}function f(a){function c(c){return c.sort(a)}function e(a){return a}return d.isFunction(a)?c:e}function c(){return!1}var a;a=b.Bloodhound;b.Bloodhound=k;k.noConflict=function(){b.Bloodhound=a;return k};k.tokenizers=m;d.mixin(k.prototype,
{_loadPrefetch:function(a){function c(c){e.clear();e.add(a.filter?a.filter(c):c);e._saveToStorage(e.index.serialize(),a.thumbprint,a.ttl)}var e=this,b;(b=this._readFromStorage(a.thumbprint))?(this.index.bootstrap(b),b=g.Deferred().resolve()):b=g.ajax(a.url,a.ajax).done(c);return b},_getFromRemote:function(a,c){var e=this,b;if(this.transport)return a=a||"",b=encodeURIComponent(a),b=this.remote.replace?this.remote.replace(this.remote.url,a):this.remote.url.replace(this.remote.wildcard,b),this.transport.get(b,
this.remote.ajax,function(a,b){a?c([]):c(e.remote.filter?e.remote.filter(b):b)})},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(a,c,b){this.storage&&(this.storage.set("data",a,b),this.storage.set("protocol",location.protocol,b),this.storage.set("thumbprint",c,b))},_readFromStorage:function(a){var c,e,b;this.storage&&(c=this.storage.get("data"),e=this.storage.get("protocol"),b=this.storage.get("thumbprint"));a=b!==a||e!==location.protocol;return c&&
!a?c:null},_initialize:function(){function a(){c.add(d.isFunction(b)?b():b)}var c=this,b=this.local,f;f=this.prefetch?this._loadPrefetch(this.prefetch):g.Deferred().resolve();b&&f.done(a);this.transport=this.remote?new u(this.remote):null;return this.initPromise=f.promise()},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){this.index.add(a)},get:function(a,c){function e(a){var e=h.slice(0);d.each(a,function(a){!d.some(e,function(c){return b.dupDetector(a,
c)})&&e.push(a);return e.length<b.limit});c&&c(b.sorter(e))}var b=this,h=[],f=!1,h=this.index.get(a),h=this.sorter(h).slice(0,this.limit);h.length<this.limit?f=this._getFromRemote(a,e):this._cancelLastRemoteRequest();f||(0<h.length||!this.transport)&&c&&c(h)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&u.resetCache()},ttAdapter:function(){return d.bind(this.get,this)}});return k})(this);var r=function(){var b=
{wrapper:{position:"relative",display:"block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},
rtl:{left:"auto",right:" 0"}};d.isMsie()&&d.mixin(b.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});d.isMsie()&&7>=d.isMsie()&&d.mixin(b.input,{marginTop:"-1px"});return b}(),z=function(){function b(b){b&&b.el||g.error("EventBus initialized without el");this.$el=g(b.el)}d.mixin(b.prototype,{trigger:function(b){var f=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+b,f)}});return b}(),y=function(){function b(a,b,d,g){if(!d)return this;
b=b.split(c);d=g?f(d,g):d;for(this._callbacks=this._callbacks||{};g=b.shift();)this._callbacks[g]=this._callbacks[g]||{sync:[],async:[]},this._callbacks[g][a].push(d);return this}function d(a,c,b){return function(){for(var e,h=0,f=a.length;!e&&h<f;h+=1)e=!1===a[h].apply(c,b);return!e}}function f(a,c){return a.bind?a.bind(c):function(){a.apply(c,[].slice.call(arguments,0))}}var c=/\s+/,a=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},
0)}}();return{onSync:function(a,c,f){return b.call(this,"sync",a,c,f)},onAsync:function(a,c,f){return b.call(this,"async",a,c,f)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(c);b=a.shift();)delete this._callbacks[b];return this},trigger:function(b){var e,f,g,k,w;if(!this._callbacks)return this;b=b.split(c);for(g=[].slice.call(arguments,1);(e=b.shift())&&(f=this._callbacks[e]);)k=d(f.sync,this,[e].concat(g)),w=d(f.async,this,[e].concat(g)),k()&&a(w);return this}}}(),C=function(b){function g(c,
a,b){for(var e=[],f=0,g=c.length;f<g;f++)e.push(d.escapeRegExChars(c[f]));c=b?"\\b("+e.join("|")+")\\b":"("+e.join("|")+")";return a?new RegExp(c):new RegExp(c,"i")}var f={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(c){function a(c,b){for(var e,f=0;f<c.childNodes.length;f++)e=c.childNodes[f],3===e.nodeType?f+=b(e)?1:0:a(e,b)}var e;c=d.mixin({},f,c);c.node&&c.pattern&&(c.pattern=d.isArray(c.pattern)?c.pattern:[c.pattern],e=g(c.pattern,c.caseSensitive,
c.wordsOnly),a(c.node,function(a){var f,d,h;if(f=e.exec(a.data))h=b.createElement(c.tagName),c.className&&(h.className=c.className),d=a.splitText(f.index),d.splitText(f[0].length),h.appendChild(d.cloneNode(!0)),a.parentNode.replaceChild(h,d);return!!f}))}}(window.document),A=function(){function b(a){var b=this,f,q,l,t;a=a||{};a.input||g.error("input is missing");f=d.bind(this._onBlur,this);q=d.bind(this._onFocus,this);l=d.bind(this._onKeydown,this);t=d.bind(this._onInput,this);this.$hint=g(a.hint);
this.$input=g(a.input).on("blur.tt",f).on("focus.tt",q).on("keydown.tt",l);0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=d.noop);if(d.isMsie())this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){c[a.which||a.keyCode]||d.defer(d.bind(b._onInput,b,a))});else this.$input.on("input.tt",t);this.query=this.$input.val();this.$overflowHelper=k(this.$input)}function k(a){return g('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",
whiteSpace:"pre",fontFamily:a.css("font-family"),fontSize:a.css("font-size"),fontStyle:a.css("font-style"),fontVariant:a.css("font-variant"),fontWeight:a.css("font-weight"),wordSpacing:a.css("word-spacing"),letterSpacing:a.css("letter-spacing"),textIndent:a.css("text-indent"),textRendering:a.css("text-rendering"),textTransform:a.css("text-transform")}).insertAfter(a)}function f(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var c;c={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};
b.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};d.mixin(b.prototype,y,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(a){var b=c[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(a,c){var b,e;switch(a){case "tab":b=this.getHint();e=this.getInputValue();
b=b&&b!==e&&!f(c);break;case "up":case "down":b=!f(c);break;default:b=!1}b&&c.preventDefault()},_shouldTrigger:function(a,c){var b;switch(a){case "tab":b=!f(c);break;default:b=!0}return b},_checkInputValue:function(){var a,c,f;a=this.getInputValue();c=this.query;f=(c=b.normalizeQuery(a)===b.normalizeQuery(c))?this.query.length!==a.length:!1;this.query=a;c?f&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},
getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,c){this.$input.val(a);c?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,c;a=this.getInputValue();c=this.getHint();c=a!==c&&0===c.indexOf(a);
""!==a&&c&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c;a=this.$input.val().length;c=this.$input[0].selectionStart;return d.isNumber(c)?c===a:document.selection?(c=document.selection.createRange(),c.moveStart("character",-a),a===c.text.length):
!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return b}(),v=function(){function b(c){c=c||{};c.templates=c.templates||{};c.source||g.error("missing source");c.name&&!/^[_a-zA-Z0-9-]+$/.test(c.name)&&g.error("invalid dataset name: "+c.name);this.query=null;this.highlight=!!c.highlight;this.name=c.name||d.getUniqueId();this.source=c.source;this.displayFn=k(c.display||c.displayKey);this.templates=f(c.templates,this.displayFn);
this.$el=g('<div class="tt-dataset-%CLASS%"></div>'.replace("%CLASS%",this.name))}function k(c){function a(a){return a[c]}c=c||"value";return d.isFunction(c)?c:a}function f(c,a){function b(c){return"<p>"+a(c)+"</p>"}return{empty:c.empty&&d.templatify(c.empty),header:c.header&&d.templatify(c.header),footer:c.footer&&d.templatify(c.footer),suggestion:c.suggestion||b}}b.extractDatasetName=function(c){return g(c).data("ttDataset")};b.extractValue=function(c){return g(c).data("ttValue")};b.extractDatum=
function(c){return g(c).data("ttDatum")};d.mixin(b.prototype,y,{_render:function(c,a){function b(){var b,f;b=g('<span class="tt-suggestions"></span>').css(r.suggestions);f=d.map(a,function(a){a=g('<div class="tt-suggestion"></div>').append(l.templates.suggestion(a)).data("ttDataset",l.name).data("ttValue",l.displayFn(a)).data("ttDatum",a);a.children().each(function(){g(this).css(r.suggestionChild)});return a});b.append.apply(b,f);l.highlight&&C({className:"tt-highlight",node:b[0],pattern:c});return b}
function f(){return l.templates.header({query:c,isEmpty:!t})}function k(){return l.templates.footer({query:c,isEmpty:!t})}if(this.$el){var l=this,t;this.$el.empty();t=a&&a.length;!t&&this.templates.empty?this.$el.html(l.templates.empty({query:c,isEmpty:!0})).prepend(l.templates.header?f():null).append(l.templates.footer?k():null):t&&this.$el.html(b()).prepend(l.templates.header?f():null).append(l.templates.footer?k():null);this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(c){var a=
this;this.query=c;this.canceled=!1;this.source(c,function(b){a.canceled||c!==a.query||a._render(c,b)})},cancel:function(){this.canceled=!0},clear:function(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}});return b}(),D=function(){function b(b){var c=this,a,f,h;b=b||{};b.menu||g.error("menu is required");this.isOpen=!1;this.isEmpty=!0;this.datasets=d.map(b.datasets,k);a=d.bind(this._onSuggestionClick,this);
f=d.bind(this._onSuggestionMouseEnter,this);h=d.bind(this._onSuggestionMouseLeave,this);this.$menu=g(b.menu).on("click.tt",".tt-suggestion",a).on("mouseenter.tt",".tt-suggestion",f).on("mouseleave.tt",".tt-suggestion",h);d.each(this.datasets,function(a){c.$menu.append(a.getRoot());a.onSync("rendered",c._onRendered,c)})}function k(b){return new v(b)}d.mixin(b.prototype,y,{_onSuggestionClick:function(b){this.trigger("suggestionClicked",g(b.currentTarget))},_onSuggestionMouseEnter:function(b){this._removeCursor();
this._setCursor(g(b.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){(this.isEmpty=d.every(this.datasets,function(b){return b.isEmpty()}))?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(b,
c){b.first().addClass("tt-cursor");!c&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(b){var c,a;this.isOpen&&(a=this._getCursor(),c=this._getSuggestions(),this._removeCursor(),b=c.index(a)+b,b=(b+1)%(c.length+1)-1,-1===b?this.trigger("cursorRemoved"):(-1>b&&(b=c.length-1),this._setCursor(c=c.eq(b)),this._ensureVisible(c)))},_ensureVisible:function(b){var c,a,e;c=b.position().top;b=c+b.outerHeight(!0);a=this.$menu.scrollTop();
e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);0>c?this.$menu.scrollTop(a+c):e<b&&this.$menu.scrollTop(a+(b-e))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(b){this.$menu.css("ltr"===b?r.ltr:r.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},
getDatumForSuggestion:function(b){var c=null;b.length&&(c={raw:v.extractDatum(b),value:v.extractValue(b),datasetName:v.extractDatasetName(b)});return c},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(b){d.each(this.datasets,function(c){c.update(b)})},empty:function(){d.each(this.datasets,function(b){b.clear()});this.isEmpty=!0},isVisible:function(){return this.isOpen&&
!this.isEmpty},destroy:function(){this.$menu.off(".tt");this.$menu=null;d.each(this.datasets,function(b){b.destroy()})}});return b}(),E=function(){function b(a){var c,b,f;a=a||{};a.input||g.error("missing input");this.isActivated=!1;this.autoselect=!!a.autoselect;this.minLength=d.isNumber(a.minLength)?a.minLength:1;this.$node=k(a.input,a.withHint);c=this.$node.find(".tt-dropdown-menu");b=this.$node.find(".tt-input");f=this.$node.find(".tt-hint");b.on("blur.tt",function(a){var e,f;e=document.activeElement;
f=c.is(e);e=0<c.has(e).length;d.isMsie()&&(f||e)&&(a.preventDefault(),a.stopImmediatePropagation(),d.defer(function(){b.focus()}))});c.on("mousedown.tt",function(a){a.preventDefault()});this.eventBus=a.eventBus||new z({el:b});this.dropdown=(new D({menu:c,datasets:a.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,
this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=(new A({input:b,hint:f})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,
this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}function k(a,c){var b,e,d,k;b=g(a);e=g('<span class="twitter-typeahead"></span>').css(r.wrapper);d=g('<span class="tt-dropdown-menu"></span>').css(r.dropdown);k=b.clone().css(r.hint).css(f(b));k.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1});b.data("ttAttrs",{dir:b.attr("dir"),autocomplete:b.attr("autocomplete"),
spellcheck:b.attr("spellcheck"),style:b.attr("style")});b.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(c?r.input:r.inputWithNoHint);try{!b.attr("dir")&&b.attr("dir","auto")}catch(w){}return b.wrap(e).parent().prepend(c?k:null).append(d)}function f(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),
backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function c(a){var b=a.find(".tt-input");d.each(b.data("ttAttrs"),function(a,c){d.isUndefined(a)?b.removeAttr(c):b.attr(c,a)});b.detach().removeData("ttAttrs").removeClass("tt-input").insertAfter(a);a.remove()}d.mixin(b.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.setInputValue(a.value,
!0);this.eventBus.trigger("cursorchanged",a.raw,a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0;this.dropdown.open()},_onBlurred:function(){this.isActivated=!1;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function(a,
b){var c,e;c=this.dropdown.getDatumForCursor();e=this.dropdown.getDatumForTopSuggestion();c?(this._select(c),b.preventDefault()):this.autoselect&&e&&(this._select(e),b.preventDefault())},_onTabKeyed:function(a,b){var c;(c=this.dropdown.getDatumForCursor())?(this._select(c),b.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):
this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHintIfInvalid();b.length>=this.minLength?this.dropdown.update(b):this.dropdown.empty();this.dropdown.open();
this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,b,c;(a=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(b=this.input.getInputValue(),c=A.normalizeQuery(b),c=d.escapeRegExChars(c),c=new RegExp("^(?:"+
c+")(.+$)","i"),(a=c.exec(a.value))?this.input.setHint(b+a[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(a){var b,c;b=this.input.getHint();c=this.input.getQuery();a=a||this.input.isCursorAtEnd();b&&c!==b&&a&&((b=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(b.value),this.eventBus.trigger("autocompleted",b.raw,b.datasetName))},_select:function(a){this.input.setQuery(a.value);this.input.setInputValue(a.value,!0);this._setLanguageDirection();this.eventBus.trigger("selected",
a.raw,a.datasetName);this.dropdown.close();d.defer(d.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(a){a=d.toStr(a);this.isActivated?this.input.setInputValue(a):(this.input.setQuery(a),this.input.setInputValue(a,!0));this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy();this.dropdown.destroy();c(this.$node);this.$node=null}});return b}();(function(){var b,
k;b=g.fn.typeahead;k={initialize:function(b,c){c=d.isArray(c)?c:[].slice.call(arguments,1);b=b||{};return this.each(function(){var a=g(this),e;d.each(c,function(a){a.highlight=!!b.highlight});e=new E({input:a,eventBus:new z({el:a}),withHint:d.isUndefined(b.hint)?!0:!!b.hint,minLength:b.minLength,autoselect:b.autoselect,datasets:c});a.data("ttTypeahead",e)})},open:function(){return this.each(function(){var b;(b=g(this).data("ttTypeahead"))&&b.open()})},close:function(){return this.each(function(){var b;
(b=g(this).data("ttTypeahead"))&&b.close()})},val:function(b){function c(){var a;(a=g(this).data("ttTypeahead"))&&a.setVal(b)}function a(a){var b;if(a=a.data("ttTypeahead"))b=a.getVal();return b}return arguments.length?this.each(c):a(this.first())},destroy:function(){return this.each(function(){var b=g(this),c;if(c=b.data("ttTypeahead"))c.destroy(),b.removeData("ttTypeahead")})}};g.fn.typeahead=function(b){var c;return k[b]&&"initialize"!==b?(c=this.filter(function(){return!!g(this).data("ttTypeahead")}),
k[b].apply(c,[].slice.call(arguments,1))):k.initialize.apply(this,arguments)};g.fn.typeahead.noConflict=function(){g.fn.typeahead=b;return this}})()})(window.jQuery);//# sourceMappingURL=typeahead.bundle.min.js.map
